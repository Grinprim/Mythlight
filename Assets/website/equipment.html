<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mythlight RPG | Equipment & Crafting</title>
    <link rel="icon" type="image/svg+xml" href="../img/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .row td{
            text-align: center;
            padding: 8px;
            
        }
        .row{
            border-bottom: 1px solid #282e40;
        }
        table{
            width:100%;
        }
        
    </style>
</head>

<body class="bg-custom-dark text-slate-300">

    <div id="navbar-placeholder"></div>

    <main class="pt-32 pb-20 px-6 max-w-7xl mx-auto space-y-24">

        
        <header>
            <h1 class="text-5xl font-bold text-white mb-4">Equipment</h1>
            <p class="text-lg text-indigo-300 max-w-3xl">
                This section outlines a few key mechanics and systems.
                <br>Firstly it covers equipment, its damage types, tags and ofcourse the equipment itself.
                <br>It also outlines crafting, as its a core part of the system being able to create your own crafts.
                <br>Lastly it also covers brewing and creating potions, it comes prepackaged with a brewing calculator, so its easier to determine what DC a certain potion requires to be crafted.
            </p>
        </header>

        
        <section class="space-y-12">
            
            
            <div>
                <h2 class="text-3xl text-white font-bold mb-6 border-b border-slate-800 pb-4">Physical Damage Types</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="rule-card p-5 border-l-4 border-l-red-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-red-400 transition-colors">Puncture</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">This damage type is all about piercing the enemy, knives, rapiers, picks, all fall into this category.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-rose-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-rose-400 transition-colors">Slash</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">From swords to sabers, its all about slashing at your foes.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-slate-400 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-slate-300 transition-colors">Blunt</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Heavy, armor-crushing force and impact. Think hammers, clubs etc.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-orange-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-orange-400 transition-colors">Cleave</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Chopping and cutting into your foes, axes and cleavers are a prime example.</span>
                    </div>
                </div>
            </div>
            
            <div>
                <h2 class="text-3xl text-white font-bold mb-6 border-b border-slate-800 pb-4">Elemental Damage Types</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
                    <div class="rule-card p-5 border-l-4 border-l-orange-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-orange-400 transition-colors">Fire</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Heat, fire, certain explosions. These all would deal Fire damage, all sources of fire damage can ignite flamable objects.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-blue-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-blue-400 transition-colors">Ice</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Frost is a powerful force, it can freeze and strike most anything. All sources of Ice damage can freeze liquid, tho the amount frozen is determined by the Narrator.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-slate-400 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-slate-300 transition-colors">Lightning</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">The force of the sky, crackling and striking enemies, electrical devices aswell as magic can produce this damage type.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-yellow-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-yellow-400 transition-colors">Light</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Holy energy, often granted by Divine spellcasting, sometimes healing spells deal this damage type to undead.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-black-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-black-400 transition-colors">Dark</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Unholy energy, often granted by Occult spellcasting, a hard damage type to find resistances for.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-rose-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-rose-400 transition-colors">Force</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Simply put, kintetic force. Any impact or push that is not clasafiable as any other damage type.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-purple-400 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-purple-300 transition-colors">Psychic</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Damage directly inflicted to the creatures mind, often not visible to the naked eye. But if it is visible, run.</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-lime-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-lime-400 transition-colors">Poison</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">From eating expired food, to being bitten by a snake. Often comes bundled with the Poisoned Condition :)</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-green-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-green-400 transition-colors">Acid</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">Melts through many things, be concerned as it can bypass guard :O</span>
                    </div>
                    <div class="rule-card p-5 border-l-4 border-l-teal-500 hover:bg-slate-800/50 transition-colors group">
                        <strong class="text-white block mb-2 text-lg group-hover:text-teal-400 transition-colors">Vibro</strong>
                        <span class="text-xs text-slate-400 leading-relaxed">That ringing in your ears, the force of thunderous strikes, all of these are counted as "Vibro" Damage, short for vibrational damage</span>
                    </div>
                </div>
            </div>
            
            <div>
                <h2 class="text-3xl text-white font-bold mb-6 border-b border-slate-800 pb-4">Equipment Tags</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.6)]"></div>
                        <div>
                            <strong class="text-indigo-300 block text-sm mb-1 uppercase tracking-wider">Concealable</strong>
                            <p class="text-slate-400 text-xs">For roleplay purposes is not considered a weapon or armor.</p>
                        </div>
                    </div>
                    
                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)]"></div>
                        <div>
                            <strong class="text-emerald-300 block text-sm mb-1 uppercase tracking-wider">Flexible</strong>
                            <p class="text-slate-400 text-xs">Does not impose penalties on stealth or acrobatic movements. Relevant with heavy armor.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.6)]"></div>
                        <div>
                            <strong class="text-orange-300 block text-sm mb-1 uppercase tracking-wider">(Element)proof</strong>
                            <p class="text-slate-400 text-xs">You gain resistance to (Element) Damage while wearing it.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-slate-400 shadow-[0_0_8px_rgba(148,163,184,0.6)]"></div>
                        <div>
                            <strong class="text-slate-300 block text-sm mb-1 uppercase tracking-wider">Reinforced(P/B/S/C)</strong>
                            <p class="text-slate-400 text-xs">You gain resistance to (Puncture/Blunt/Slash/Cleave) Damage while wearing it.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)]"></div>
                        <div>
                            <strong class="text-red-300 block text-sm mb-1 uppercase tracking-wider">Restrictive</strong>
                            <p class="text-slate-400 text-xs">Imposes disadvantage on Finesse(Stealth) and Reflex.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.6)]"></div>
                        <div>
                            <strong class="text-indigo-300 block text-sm mb-1 uppercase tracking-wider">Two-Handed</strong>
                            <p class="text-slate-400 text-xs">Requires two hands to wield effectively.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.6)]"></div>
                        <div>
                            <strong class="text-cyan-300 block text-sm mb-1 uppercase tracking-wider">Compact</strong>
                            <p class="text-slate-400 text-xs">Counts as one weight class lower when stored in inventory.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-yellow-600 shadow-[0_0_8px_rgba(202,138,4,0.6)]"></div>
                        <div>
                            <strong class="text-yellow-500 block text-sm mb-1 uppercase tracking-wider">Constructed</strong>
                            <p class="text-slate-400 text-xs">Has a durability score; If crafted the durability is listed, otherwise Narrator will inform you.</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/30 p-4 rounded-xl border border-slate-700/50 hover:border-indigo-500/30 transition-all hover:bg-slate-900/50 flex items-start gap-3">
                        <div class="mt-1 w-2 h-2 rounded-full bg-purple-500 shadow-[0_0_8px_rgba(168,85,247,0.6)]"></div>
                        <div>
                            <strong class="text-purple-300 block text-sm mb-1 uppercase tracking-wider">Powered</strong>
                            <p class="text-slate-400 text-xs">Requires fuel to opperate; If crafted fuel amount and type is listed, otherwise Narrator will inform you.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        
        <section class="space-y-6">
            <div class="flex items-center gap-4 mb-2">
                <h2 class="text-3xl text-white font-bold">Armory</h2>
                <div class="h-px bg-slate-700 flex-1"></div>
            </div>

            
            <details open class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Light Melee Weapons</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Reach</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="m1"></tbody>
                    </table>
                </div>
            </details>

            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Medium Melee Weapons</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Reach</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="m2"></tbody>
                    </table>
                </div>
            </details>

            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Heavy Melee Weapons</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Reach</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="m3"></tbody>
                    </table>
                </div>
            </details>

            
            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Light Ranged Weapons</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="r1"></tbody>
                    </table>
                </div>
            </details>

            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Heavy Ranged Weapons</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="r2"></tbody>
                    </table>
                </div>
            </details>

            
            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Light Firearms</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="f1"></tbody>
                    </table>
                </div>
            </details>

            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Heavy Firearms</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="f2"></tbody>
                    </table>
                </div>
            </details>

            
            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Armor</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Armor</th>
                                <th>Rating</th>
                                <th>Penalty</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="armor"></tbody>
                    </table>
                </div>
            </details>

            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Shields</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Shield</th>
                                <th>Bonus</th>
                                <th>Penalty</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="shields"></tbody>
                    </table>
                </div>
            </details>

        </section>

        
        <section id="crafting" class="space-y-8">
            <header>
                <h1 class="text-5xl font-bold text-white mb-4">Crafting</h1>
                <p class="text-lg text-indigo-300 max-w-3xl">Create items of power using components found in your travels.</p>
            </header>

            <details open class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Crafting Recipes</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>

                <div class="flex items-center gap-3 my-6 bg-slate-900/40 p-3 rounded-lg border border-slate-700 w-fit">
                    <label class="text-xs font-bold uppercase tracking-widest text-slate-400">Filter Tier:</label>
                    <select id="tierFilter" onchange="filterCrafting()" class="select-dark text-sm">
                        <option value="all">All Tiers</option>
                        <option>Trivial</option>
                        <option>Simple</option>
                        <option>Standard</option>
                        <option>Difficult</option>
                        <option>Complex</option>
                    </select>
                </div>

                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Tier</th>
                                <th>Category</th>
                                <th>Components</th>
                                <th>Effect</th>
                            </tr>
                        </thead>
                        <tbody id="crafting-recipes"></tbody>
                    </table>
                </div>
            </details>

            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Crafting Components</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>
                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Category</th>
                                <th>Tier</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="craft-components"></tbody>
                    </table>
                </div>
            </details>
        </section>

        
        <section id="brewing" class="space-y-8">

            <header>
                <h1 class="text-5xl font-bold text-white mb-4">Brewing & Alchemy</h1>
                <p class="text-lg text-indigo-300 max-w-4xl">
                    Brewing combines ingredients with defined aspects and tiers to produce potions, poisons, and volatile mixtures. Outcomes depend on balance, precision, and ingredient synergy.
                </p>
            </header>

            <div class="grid lg:grid-cols-2 gap-8">
                
                <details open class="rule-card h-fit">
                    <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300">Brewing Rules</summary>
                    <ul class="list-disc list-outside ml-5 text-slate-300 space-y-3 mt-4 text-sm leading-relaxed">
                        <li>For each required aspect A, sum ingredient aspect values: <strong>Total(A) = Σ ingredient contributions of A.</strong></li>
                        <li>Tier = highest tier shared by the majority of ingredients used. <i>If tied, use the highest tier present.</i></li>
                        <li><strong>Max</strong> = highest Total(A) among all required aspects.
                         <br>For each required aspect A:
                         <br><strong>Diff(A) = |Max − Total(A)|</strong>
                         <br>DISPARITY = Σ Diff(A)</li>
                        <li><strong>BITS</strong> = number of 1s in the potion’s aspect bitcode.
                         <br><strong>DC = 6 + BITS + DISPARITY + (Tier − 1)</strong></li>
                        <li>Use the calculator on the right to help you out.</li>
                    </ul>
                </details>

                
                <details open class="rule-card h-fit">
                    <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300">Brewing Calculator</summary>
                    <div class="space-y-4 mt-6">
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">
                                Bitcode Pattern
                            </label>
                            <input id="brewBitcode" type="text" maxlength="5" placeholder="e.g. 10110"
                                class="input-dark font-mono text-lg tracking-widest placeholder-slate-600">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">
                                    Disparity
                                </label>
                                <input id="brewDisparityInput" type="number" min="0" value="0"
                                    class="input-dark">
                            </div>

                            <div>
                                <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">
                                    Target Tier
                                </label>
                                <select id="brewTier" class="select-dark w-full h-[46px]">
                                    <option value="1">Tier I</option>
                                    <option value="2">Tier II</option>
                                    <option value="3">Tier III</option>
                                    <option value="4">Tier IV</option>
                                </select>
                            </div>
                        </div>

                        <div class="pt-6 mt-4 border-t border-slate-700 flex justify-between items-center">
                            <span class="text-slate-400 text-sm font-bold uppercase tracking-widest">
                                Difficulty Class (DC)
                            </span>
                            <span id="brewDCResult" class="text-4xl text-indigo-400 font-bold fantasy-font">
                                —
                            </span>
                        </div>
                    </div>
                </details>
            </div>

            
            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Potion Outcomes</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>

                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Bitcode</th>
                                <th>Name</th>
                                <th>Tier I</th>
                                <th>Tier II</th>
                                <th>Tier III</th>
                                <th>Tier IV</th>
                            </tr>
                        </thead>
                        <tbody id="brew-outcomes"></tbody>
                    </table>
                </div>
            </details>

            
            <details class="rule-card">
                <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
                    <span>Ingredients</span>
                    <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                    </span>
                </summary>

                <div class="table-wrap mt-4">
                    <table>
                        <thead>
                            <tr>
                                <th>Ingredient</th>
                                <th>Aspect</th>
                                <th>Value</th>
                                <th>Tier</th>
                            </tr>
                        </thead>
                        <tbody id="brew-ingredients"></tbody>
                    </table>
                </div>
            </details>
            
            <details class="rule-card">
    <summary class="text-2xl text-white font-bold cursor-pointer hover:text-indigo-300 flex items-center justify-between group">
        <span>Compound Ingredients</span>
        <span class="p-2 hover:bg-slate-800/50 rounded-lg transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor"
                class="w-6 h-6 text-slate-400">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
        </span>
    </summary>

    <div class="table-wrap mt-4">
        <table>
            <thead>
                <tr>
                    <th>Ingredient</th>ž
                    <th>Aspects</th>
                    <th>Values</th>
                    <th>Tier</th>
                </tr>
            </thead>
            <tbody id="brew-compounds"></tbody>
        </table>
    </div>
</details>
        </section>
        

    </main>

    
        <div id="footer-placeholder"></div>

    <script>
// --- 1. Helper Functions ---
const formatTags = (tags) => {
    if (!tags || tags === "-") return "-";
    const list = Array.isArray(tags) ? tags : String(tags).split(',').map(t => t.trim());
    return list.map(t => `<span class="tag-badge">${t}</span>`).join('');
};

// --- 2. Layout & Mobile Support (Wait for Fetch) ---
async function loadLayout() {
    try {
        const navRes = await fetch('../css/navbar.html');
        const navData = await navRes.text();
        const navPlaceholder = document.getElementById('navbar-placeholder');
        navPlaceholder.innerHTML = navData;

        // Execute any scripts inside the navbar
        navPlaceholder.querySelectorAll('script').forEach(oldScript => {
            const newScript = document.createElement('script');
            newScript.text = oldScript.text;
            document.body.appendChild(newScript);
        });

        // Setup Mobile Menu AFTER HTML is injected
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileBtn && mobileMenu) {
            mobileBtn.onclick = (e) => {
                e.preventDefault();
                const isHidden = mobileMenu.classList.toggle('hidden');
                // Force display style to bypass Tailwind flex conflicts
                mobileMenu.style.display = isHidden ? 'none' : 'block';
            };
        }

        // Fetch Footer
        const footerRes = await fetch('../css/footer.html');
        const footerData = await footerRes.text();
        document.getElementById('footer-placeholder').innerHTML = footerData;

    } catch (err) {
        console.error("Layout initialization failed:", err);
    }
}

// --- 3. Data Loading with "Safety Guards" ---
async function loadEquipment() {
    try {
        const res = await fetch('../json/equipment.json');
        const data = await res.json();
        const fill = (id, rows) => {
            const body = document.getElementById(id);
            if (!body || !rows) return;
            body.innerHTML = rows.map(r => `
                <tr class="row">
                    <td class="font-bold text-white">${r.Name}</td>
                    <td><span class="text-emerald-300 font-mono">${r.Damage ?? r.Rating ?? r.Bonus ?? "-"}</span></td>
                    <td>${r.Reach ?? r.Range ?? "-"}</td>
                    <td>${formatTags(r.Ammo ?? r.Tags ?? "-")}</td>
                    <td class="text-slate-400 text-xs leading-relaxed italic">${r.Description ?? ""}</td>
                </tr>
            `).join("");
        };

        if (data.weapons) {
            const w = data.weapons;
            fill("m1", w.m1); fill("m2", w.m2); fill("m3", w.m3);
            fill("r1", w.r1); fill("r2", w.r2);
            fill("f1", w.f1); fill("f2", w.f2);
        }
        if (data.armor) fill("armor", [...(data.armor.a1 || []), ...(data.armor.a2 || []), ...(data.armor.a3 || [])]);
        if (data.shields) fill("shields", data.shields.ss);
    } catch (e) { console.error("Equipment JSON error:", e); }
}

async function loadCrafting() {
    try {
        const res = await fetch('../json/crafting.json');
        const data = await res.json();

        const recipesBody = document.getElementById("crafting-recipes");
        if (recipesBody) {
            // Using (data.recipes || []) prevents the "map of undefined" error
            recipesBody.innerHTML = (data.recipes || []).map(r => `
                <tr data-tier="${r.tier}" class="row">
                    <td class="font-bold text-white">${r.name}</td>
                    <td><span class="text-xs font-bold uppercase bg-slate-800 px-2 py-1 rounded border border-slate-700 text-slate-300">${r.tier}</span></td>
                    <td>${r.category}</td>
                    <td class="text-xs">${(r.components || []).join(", ")}</td>
                    <td class="text-slate-400 italic">${r.effect}</td>
                </tr>
            `).join("");
        }

        const componentsBody = document.getElementById("craft-components");
        if (componentsBody) {
            componentsBody.innerHTML = (data.components || []).map(c => `
                <tr class="row">
                    <td class="font-bold text-white">${c.name}</td>
                    <td>${c.category}</td>
                    <td>${c.tier}</td>
                    <td class="text-slate-400 italic">${c.notes ?? ""}</td>
                </tr>
            `).join("");
        }
    } catch (e) { console.error("Crafting JSON error:", e); }
}

async function loadBrewing() {
    try {
        const res = await fetch('../json/brewing.json');
        const data = await res.json();
        
        const outcomesBody = document.getElementById("brew-outcomes");
        if (outcomesBody) {
            outcomesBody.innerHTML = (data.bitcodes || []).map(b => `
                <tr class="row">
                    <td class="font-mono text-indigo-400 font-bold tracking-wider">${b.code}</td>
                    <td class="font-bold text-white">${b.name}</td>
                    ${(b.effects || []).map(e => `<td class="text-slate-400 text-xs">${e}</td>`).join("")}
                </tr>
            `).join("");
        }

        const ingredientsBody = document.getElementById("brew-ingredients");
        if (ingredientsBody) {
            ingredientsBody.innerHTML = (data.ingredients || []).map(i => `
                <tr class="row">
                    <td class="font-bold text-white">${i.name}</td>
                    <td><span class="tag-badge">${i.aspect}</span></td>
                    <td class="font-mono text-emerald-300">${i.value}</td>
                    <td><span class="text-xs font-bold uppercase bg-slate-800 px-2 py-1 rounded border border-slate-700 text-slate-300">Tier ${i.tier}</span></td>
                </tr>
            `).join("");
        }
    } catch (e) { console.error("Brewing JSON error:", e); }
}

// --- 4. Interaction & Initialization ---
function calculateBrewingDC() {
    const bitcode = document.getElementById("brewBitcode")?.value.trim() || "";
    const disparity = parseInt(document.getElementById("brewDisparityInput")?.value || 0);
    const tier = parseInt(document.getElementById("brewTier")?.value || 1);
    const output = document.getElementById("brewDCResult");

    if (!output || !/^[01]{1,5}$/.test(bitcode)) {
        if(output) output.textContent = "—";
        return;
    }
    const bits = (bitcode.match(/1/g) || []).length;
    output.textContent = 6 + bits + disparity + (tier - 1);
}

document.addEventListener("DOMContentLoaded", () => {
    // These run in parallel so everything works together
    loadLayout();
    loadEquipment();
    loadCrafting();
    loadBrewing();
});

document.addEventListener("input", (e) => {
    if (["brewBitcode", "brewDisparityInput", "brewTier"].includes(e.target.id)) {
        calculateBrewingDC();
    }
});
    </script>
</body>

</html>
