<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mythlight RPG | Equipment & Crafting</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: #0f172a;
            color: #cbd5e1;
        }

        details > summary {
    padding-bottom: .5rem;
}

details[open] > summary {
    border-bottom: 1px solid rgba(255,255,255,.1);
    margin-bottom: 1rem;
}

        h1,
        h2,
        h3 {
            font-family: 'Cinzel', serif;
        }

        .table-wrap {
            overflow-x: auto;
        }

        th {
            font-size: .7rem;
            letter-spacing: .15em;
            text-transform: uppercase;
        }

        .card {
            background: rgba(30, 41, 59, .5);
            border: 1px solid rgba(255, 255, 255, .08);
            border-radius: 1rem;
        }

        summary {
            list-style: none;
        }

        summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<body class="pb-32">

    <main class="max-w-7xl mx-auto px-6 pt-28 space-y-24">

        <!-- ================= EQUIPMENT ================= -->

        <section>
            <h1 class="text-5xl text-white mb-6">Equipment</h1>
            <p class="max-w-3xl text-slate-400">
                Weapons, armor, and gear define how you survive Mythlight’s world.
            </p>
        </section>

        <section>
            <h2 class="text-3xl text-white mb-6">Damage Types</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="card p-5"><b>Puncture</b><br>Precise strikes.</div>
                <div class="card p-5"><b>Slash</b><br>Bleeding attacks.</div>
                <div class="card p-5"><b>Blunt</b><br>Armor-crushing force.</div>
                <div class="card p-5"><b>Cleave</b><br>Wide sweeping blows.</div>
                <div class="card p-5"><b>Blast</b><br>Area impact.</div>
            </div>
        </section>

        <!-- TAGS -->
        <section>
            <h2 class="text-3xl text-white mb-6">Equipment Tags</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 text-sm">
                <div class="card p-5"><b>Concealable</b><br>Hidden beneath normal clothing.</div>
                <div class="card p-5"><b>Flexible</b><br>No stealth penalty.</div>
                <div class="card p-5"><b>Fireproof</b><br>Reduce fire damage by 1.</div>
                <div class="card p-5"><b>Ballistic</b><br>Reduce firearm damage by 1.</div>
                <div class="card p-5"><b>Restrictive</b><br>–1 Reflex; no Evasion bonuses.</div>
                <div class="card p-5"><b>Two-Handed</b><br>Occupies both hands.</div>
                <div class="card p-5"><b>Compact</b><br>Usable off-hand.</div>
                <div class="card p-5"><b>Improvised</b><br>Breaks after 3 hits.</div>
                <div class="card p-5"><b>Powered</b><br>Negates 1 Restrictive penalty.</div>
            </div>
        </section>

        

        <!-- ================= WEAPONS ================= -->

        <section class="space-y-10">

            <!-- MELEE -->
            <details open class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Light Melee Weapons</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Reach</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="m1"></tbody>
                    </table>
                </div>
            </details>

            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Medium Melee Weapons</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Reach</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="m2"></tbody>
                    </table>
                </div>
            </details>

            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Heavy Melee Weapons</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Reach</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="m3"></tbody>
                    </table>
                </div>
            </details>

            <!-- RANGED -->
            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Light Ranged Weapons</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="r1"></tbody>
                    </table>
                </div>
            </details>

            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Heavy Ranged Weapons</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="r2"></tbody>
                    </table>
                </div>
            </details>

            <!-- FIREARMS -->
            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Light Firearms</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="f1"></tbody>
                    </table>
                </div>
            </details>

            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Heavy Firearms</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Weapon</th>
                                <th>Damage</th>
                                <th>Range</th>
                                <th>Ammo</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="f2"></tbody>
                    </table>
                </div>
            </details>

            <!-- ARMOR -->
            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Armor</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Armor</th>
                                <th>Rating</th>
                                <th>Penalty</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="armor"></tbody>
                    </table>
                </div>
            </details>

            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Shields</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Shield</th>
                                <th>Bonus</th>
                                <th>Penalty</th>
                                <th>Tags</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="shields"></tbody>
                    </table>
                </div>
            </details>

        </section>

        <!-- ================= CRAFTING ================= -->

        <section id="crafting" class="space-y-16">
            <h1 class="text-5xl text-white">Crafting</h1>

            <details open class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Crafting Recipes</summary>

                <label class="block my-4">
                    Filter Tier:
                    <select id="tierFilter" onchange="filterCrafting()" class="bg-slate-800 p-2 rounded">
                        <option value="all">All</option>
                        <option>Trivial</option>
                        <option>Simple</option>
                        <option>Standard</option>
                        <option>Difficult</option>
                        <option>Complex</option>
                    </select>
                </label>

                <div class="table-wrap">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Tier</th>
                                <th>Category</th>
                                <th>Components</th>
                                <th>Effect</th>
                            </tr>
                        </thead>
                        <tbody id="crafting-recipes"></tbody>
                    </table>
                </div>
            </details>

            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Crafting Components</summary>
                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Category</th>
                                <th>Tier</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="craft-components"></tbody>
                    </table>
                </div>
            </details>
        </section>

        <!-- ================= BREWING & ALCHEMY ================= -->

        <section id="brewing" class="space-y-16">

            <!-- HEADER -->
            <section>
                <h1 class="text-5xl text-white mb-6">Brewing & Alchemy</h1>
                <p class="max-w-4xl text-slate-400">
                    Brewing combines ingredients with defined aspects and tiers to produce
                    potions, poisons, and volatile mixtures. Outcomes depend on balance,
                    precision, and ingredient synergy.
                </p>
            </section>

            <!-- BREWING RULES -->
            <details open class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Brewing Rules</summary>
                <ul class="list-disc list-inside text-slate-300 space-y-2 max-w-4xl mt-4">
                    <li>Select ingredients totaling at least one full Aspect Bitcode.</li>
                    <li>Majority ingredient tier determines potion tier.</li>
                    <li>Disparity between aspects increases difficulty.</li>
                    <li>Failure may weaken, alter, or destabilize the brew.</li>
                </ul>
            </details>

            <!-- BREWING CALCULATOR -->
            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Brewing Calculator</summary>
    <div class="card p-6 max-w-xl space-y-4">

        <div>
            <label class="block text-sm uppercase tracking-widest text-slate-400 mb-1">
                Bitcode
            </label>
            <input id="brewBitcode"
                   type="text"
                   maxlength="5"
                   placeholder="e.g. 10110"
                   class="w-full bg-slate-900 border border-slate-700 rounded px-3 py-2 text-white font-mono">
        </div>

        <div>
            <label class="block text-sm uppercase tracking-widest text-slate-400 mb-1">
                Disparity
            </label>
            <input id="brewDisparityInput"
                   type="number"
                   min="0"
                   value="0"
                   class="w-full bg-slate-900 border border-slate-700 rounded px-3 py-2 text-white">
        </div>

        <div>
            <label class="block text-sm uppercase tracking-widest text-slate-400 mb-1">
                Tier
            </label>
            <select id="brewTier"
                    class="w-full bg-slate-900 border border-slate-700 rounded px-3 py-2 text-white">
                <option value="1">Tier I</option>
                <option value="2">Tier II</option>
                <option value="3">Tier III</option>
                <option value="4">Tier IV</option>
            </select>
        </div>

        <div class="pt-4 border-t border-slate-700">
            <p class="text-slate-400 text-sm">
                Difficulty Class
            </p>
            <p id="brewDCResult" class="text-3xl text-white font-bold">
                —
            </p>
        </div>
    </div>
            </details>

            <!-- BREW OUTCOMES -->
            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Potion Outcomes</summary>

                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th class="px-4 py-4">Bitcode</th>
                                <th class="px-4 py-4">Name</th>
                                <th class="px-4 py-4">Tier I</th>
                                <th class="px-4 py-4">Tier II</th>
                                <th class="px-4 py-4">Tier III</th>
                                <th class="px-4 py-4">Tier IV</th>
                            </tr>
                        </thead>
                        <tbody id="brew-outcomes"></tbody>
                    </table>
                </div>
            </details>

            <!-- INGREDIENTS -->
            <details class="card p-5">
                <summary class="text-3xl text-white cursor-pointer">Ingredients</summary>

                <div class="table-wrap mt-4">
                    <table class="w-full text-sm">
                        <thead>
                            <tr>
                                <th class="px-4 py-4">Ingredient</th>
                                <th class="px-4 py-4">Aspect</th>
                                <th class="px-4 py-4">Value</th>
                                <th class="px-4 py-4">Tier</th>
                                <th class="px-4 py-4">Notes</th>
                            </tr>
                        </thead>
                        <tbody id="brew-ingredients"></tbody>
                    </table>
                </div>
            </details>

        </section>


    </main>

    <!-- ================= JS ================= -->

    <script>
/* ================= EQUIPMENT ================= */

async function loadEquipment() {
    const res = await fetch("equipment.json");
    const data = await res.json();

    const fill = (id, rows) => {
        const body = document.getElementById(id);
        if (!body || !rows) return;
        body.innerHTML = rows.map(r => `
<tr class="border-b border-slate-800">
    <td class="font-bold text-white p-3">${r.Name}</td>
    <td class="p-3">${r.Damage ?? r.Rating ?? r.Bonus ?? "-"}</td>
    <td class="p-3">${r.Reach ?? r.Range ?? "-"}</td>
    <td class="p-3">${r.Ammo ?? r.Tags ?? "-"}</td>
    <td class="p-3 text-slate-400">${r.Description ?? ""}</td>
</tr>
`).join("");
    };

    fill("m1", data.weapons.m1);
    fill("m2", data.weapons.m2);
    fill("m3", data.weapons.m3);
    fill("r1", data.weapons.r1);
    fill("r2", data.weapons.r2);
    fill("f1", data.weapons.f1);
    fill("f2", data.weapons.f2);
    fill("armor", [...data.armor.a1, ...data.armor.a2, ...data.armor.a3]);
    fill("shields", data.shields.ss);
}

/* ================= CRAFTING ================= */

async function loadCrafting() {
    const res = await fetch("crafting.json");
    const data = await res.json();

    document.getElementById("crafting-recipes").innerHTML =
        data.recipes.map(r => `
<tr data-tier="${r.tier}">
    <td class="font-bold text-white p-3">${r.name}</td>
    <td class="p-3">${r.tier}</td>
    <td class="p-3">${r.category}</td>
    <td class="p-3">${r.components.join("<br>")}</td>
    <td class="p-3 text-slate-400">${r.effect}</td>
</tr>
`).join("");

    document.getElementById("craft-components").innerHTML =
        data.components.map(c => `
<tr>
    <td class="font-bold text-white p-3">${c.name}</td>
    <td class="p-3">${c.category}</td>
    <td class="p-3">${c.tier}</td>
    <td class="p-3 text-slate-400">${c.notes ?? ""}</td>
</tr>
`).join("");
}

function filterCrafting() {
    const filter = document.getElementById("tierFilter").value;
    document.querySelectorAll("#crafting-recipes tr").forEach(row => {
        row.style.display =
            filter === "all" || row.dataset.tier === filter
                ? ""
                : "none";
    });
}

/* ================= BREWING ================= */

async function loadBrewing() {
    const res = await fetch("brewing.json");
    const data = await res.json();

    /* ---- Outcomes ---- */
    document.getElementById("brew-outcomes").innerHTML =
        data.bitcodes.map(b => `
<tr class="border-b border-slate-800">
    <td class="px-4 py-4 font-mono">${b.code}</td>
    <td class="px-4 py-4 font-bold text-white">${b.name}</td>
    ${b.effects.map(e =>
        `<td class="px-4 py-4 text-slate-400">${e}</td>`
    ).join("")}
</tr>
`).join("");

    /* ---- Ingredients ---- */
    document.getElementById("brew-ingredients").innerHTML =
        data.ingredients.map(i => `
<tr class="border-b border-slate-800">
    <td class="px-4 py-4 font-bold text-white">${i.name}</td>
    <td class="px-4 py-4">${i.aspect}</td>
    <td class="px-4 py-4">${i.value}</td>
    <td class="px-4 py-4">${i.tier}</td>
    <td class="px-4 py-4 text-slate-400">${i.notes || ""}</td>
</tr>
`).join("");
}

/* ================= BREWING CALCULATOR ================= */

function calculateBrewingDC() {
    const bitcodeEl = document.getElementById("brewBitcode");
    const disparityEl = document.getElementById("brewDisparityInput");
    const tierEl = document.getElementById("brewTier");
    const output = document.getElementById("brewDCResult");

    if (!bitcodeEl || !disparityEl || !tierEl || !output) return;

    const bitcode = bitcodeEl.value.trim();
    const disparity = parseInt(disparityEl.value || 0);
    const tier = parseInt(tierEl.value);

    if (!/^[01]{1,5}$/.test(bitcode)) {
        output.textContent = "—";
        return;
    }

    const bits = (bitcode.match(/1/g) || []).length;
    const dc = 6 + bits + disparity + (tier - 1);

    output.textContent = dc;
}

document.addEventListener("input", (e) => {
    if (
        e.target.id === "brewBitcode" ||
        e.target.id === "brewDisparityInput" ||
        e.target.id === "brewTier"
    ) {
        calculateBrewingDC();
    }
});

/* ================= INIT ================= */

document.addEventListener("DOMContentLoaded", () => {
    loadEquipment();
    loadCrafting();
    loadBrewing();
});
</script>


</body>

</html>




