<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mythlight RPG | Species</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap');
        
        :root {
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-bg: rgba(15, 23, 42, 0.6);
            --glass-blur: blur(12px);
            --accent-glow: rgba(99, 102, 241, 0.3);
        }

        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        h1, h2, h3, h4, .fantasy-font { font-family: 'Cinzel', serif; }
        
        .bg-custom-dark { background-color: #0f172a; }
        
        /* Glass Navigation (Matched to rules.html) */
        .nav-glass {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Card Styles */
        .rule-card {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(4px);
            transition: border-color 0.3s;
        }
        .rule-card:hover {
            border-color: var(--accent-glow);
        }

        /* Typography Helper */
        .section-header {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
        }
        
        strong { color: white; }
    </style>
</head>
<body class="bg-custom-dark text-slate-300">

    <!-- Top Navigation -->
    <nav class="fixed w-full z-50 nav-glass">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <img src="Mythlight Logo White.svg" alt="Mythlight" class="h-10 w-auto object-contain" onerror="this.style.display='none'">
                <span class="text-xl font-bold tracking-widest text-white fantasy-font uppercase">Mythlight</span>
            </div>
            <div class="hidden md:flex space-x-8 text-xs font-semibold uppercase tracking-widest">
                <a href="index.html" class="hover:text-white transition-colors text-slate-400">Home</a>
                <a href="rules.html" class="hover:text-white transition-colors text-slate-400">Rules</a>
                <a href="species.html" class="text-indigo-400">Species</a>
                <a href="paths.html" class="hover:text-white transition-colors text-slate-400">Paths</a>
                <a href="traits.html" class="hover:text-white transition-colors text-slate-400">Traits</a>
                <a href="spells.html" class="hover:text-white transition-colors text-slate-400">Spells</a>
                <a href="equipment.html" class="hover:text-white transition-colors text-slate-400">Equipment</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-32 pb-20 px-6 max-w-5xl mx-auto">
        
        <div class="mb-12 text-center">
            <h1 class="text-5xl font-bold text-white mb-4">Playable Species</h1>
            <p class="text-lg text-indigo-300">Choose your lineage and the innate gifts it bestows upon you.</p>
        </div>

        <!-- Dynamic Content Container -->
        <div id="content" class="space-y-8">
            <!-- Loading State -->
            <div class="text-center py-12 text-slate-500">
                <div class="animate-pulse">Summoning archives...</div>
            </div>
        </div>

    </main>

    <!-- Footer (Matched to rules.html) -->
    <footer class="py-12 border-t border-slate-800 text-center bg-slate-900/50 mt-20">
        <div class="max-w-7xl mx-auto px-6">
            <img src="Mythlight Logo White.svg" alt="Mythlight Logo" class="h-12 w-auto mx-auto mb-6 opacity-40 hover:opacity-100 transition-opacity cursor-pointer">
            <div class="flex justify-center space-x-6 mb-8 text-xs font-bold tracking-widest text-slate-500 uppercase">
                <a href="index.html" class="hover:text-indigo-400">Home</a>
                <a href="rules.html" class="hover:text-indigo-400">Rules</a>
                <a href="traits.html" class="hover:text-indigo-400">Traits</a>
                <a href="spells.html" class="hover:text-indigo-400">Spells</a>
            </div>
            <p class="text-slate-500 text-xs uppercase tracking-widest">&copy; 2025 Mythlight RPG System. Designed for Legends. By Grinprim.</p>
        </div>
    </footer>

    <script>
    fetch('species.json')
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to load species.json');
        }
        return response.json();
      })
      .then(data => {
        const container = document.getElementById('content');
        container.innerHTML = ''; // Clear loading state

        data.species.forEach(species => {
          const section = document.createElement('section');
          // Using the card style from rules.html
          section.className = 'rule-card relative overflow-hidden group';

          // Decorative accent for species cards
          const accentDiv = document.createElement('div');
          accentDiv.className = 'absolute top-0 left-0 w-1 h-full bg-indigo-500 opacity-50 group-hover:opacity-100 transition-opacity';
          section.appendChild(accentDiv);

          // Content Builder
          let htmlContent = `
            <div class="flex flex-col md:flex-row justify-between items-baseline mb-4 border-b border-slate-700 pb-2">
                <h2 class="text-3xl text-white font-bold tracking-wide">${species.name}</h2>
            </div>
            
            <p class="text-indigo-300 italic mb-6 text-sm">${species.summary}</p>
            
            <div class="space-y-4 text-slate-300 mb-8 leading-relaxed">
                ${species.description.map(p => `<p>${p}</p>`).join('')}
            </div>

            <div class="mb-8">
                <h3 class="text-white font-bold mb-4 uppercase text-xs tracking-widest border-b border-slate-700/50 pb-2">Attribute Bonuses</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    ${Object.entries(species.attributes).map(([key, value]) => {
                        const valStr = value >= 0 ? `+${value}` : `${value}`;
                        const colorClass = value > 0 ? 'text-emerald-400' : (value < 0 ? 'text-red-400' : 'text-slate-400');
                        return `
                        <div class="bg-slate-900/50 p-3 rounded border border-slate-700 flex justify-between items-center">
                            <span class="text-xs font-bold uppercase text-slate-400">${key}</span>
                            <span class="${colorClass} font-mono font-bold">${valStr}</span>
                        </div>
                        `;
                    }).join('')}
                </div>
            </div>

            <div>
                <h3 class="text-white font-bold mb-4 uppercase text-xs tracking-widest border-b border-slate-700/50 pb-2">Species Traits</h3>
                ${species.traits.map(trait => `
                  <div class="bg-slate-800/30 rounded-lg p-5 border border-slate-700 hover:border-indigo-500/50 transition-colors">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-3 gap-2">
                        <strong class="text-lg text-white font-serif">${trait.Name}</strong>
                        
                        <div class="flex flex-wrap gap-2 text-[10px] uppercase font-bold tracking-wider">
                            ${trait.Action ? `<span class="px-2 py-1 rounded bg-indigo-900/40 text-indigo-300 border border-indigo-500/20">Action: ${trait.Action}</span>` : ''}
                            ${trait.Cost ? `<span class="px-2 py-1 rounded bg-purple-900/40 text-purple-300 border border-purple-500/20">Cost: ${trait.Cost}</span>` : ''}
                            ${trait.Parameters ? `<span class="px-2 py-1 rounded bg-slate-700/40 text-slate-300 border border-slate-600/20">${trait.Parameters}</span>` : ''}
                        </div>
                    </div>

                    ${trait.Symbols ? `<div class="mb-2 text-xs text-yellow-500 font-mono">${trait.Symbols}</div>` : ''}
                    
                    <div class="text-sm text-slate-400 leading-relaxed">
                        ${trait.Description}
                    </div>
                  </div>
                `).join('')}
            </div>
          `;

          section.insertAdjacentHTML('beforeend', htmlContent);
          container.appendChild(section);
        });
      })
      .catch(error => {
        const container = document.getElementById('content');
        container.innerHTML = `
            <div class="bg-red-900/20 border border-red-500/50 p-6 rounded-xl text-center">
                <h3 class="text-red-400 font-bold mb-2">Arcane Interruption</h3>
                <p class="text-red-200 text-sm">Failed to summon species data. Ensure 'species.json' is present in the archives.</p>
                <p class="text-xs text-red-900/50 mt-2 font-mono">${error.message}</p>
            </div>
        `;
        console.error(error);
      });
    </script>

</body>
</html>
