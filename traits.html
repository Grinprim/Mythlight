<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mythlight RPG | Traits</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap');

body { font-family: 'Inter', sans-serif; background:#0f172a; color:#cbd5e1; }
h1,h2,h3 { font-family:'Cinzel', serif; }

.legend-symbol {
    width:34px;height:34px;
    display:flex;align-items:center;justify-content:center;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.1);
    background:rgba(255,255,255,0.05);
    cursor:pointer;
}
.legend-symbol.active {
    background:rgba(99,102,241,0.3);
    border-color:rgba(99,102,241,0.6);
}
.legend-symbol[data-symbol="â˜…"],
.legend-symbol[data-symbol="â«˜"],
.legend-symbol[data-symbol="âš¿"] {
    cursor:default;
    opacity:0.6;
}
.symbol-tag {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
.filter-select {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: #cbd5e1;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            outline: none;
            font-size: 0.875rem;
        }
.trait-row:hover { background:rgba(99,102,241,0.05); }

.search-input {
    width:100%;
    padding:.5rem 1rem;
    border-radius:.5rem;
    background:rgba(30,41,59,.8);
    border:1px solid rgba(99,102,241,.3);
    color:#cbd5e1;


}
    .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.3); border-radius: 10px; }
</style>
</head>

<body class="p-10 max-w-7xl mx-auto">

<h1 class="text-4xl font-bold text-white mb-8">Traits</h1>

<div class="flex gap-10">

<!-- LEGEND -->
<aside class="w-72 space-y-6">
<div class="space-y-3">
    <div class="flex items-center gap-3" onclick="toggleSymbol('â§–')">
        <div class="legend-symbol" data-symbol="â§–">â§–</div><span>Passive</span>
        <div class="text-slate-500 text-[10px] italic">Always active.</div>
    </div>
    <div class="flex items-center gap-3" onclick="toggleSymbol('ðŸ—²')">
        <div class="legend-symbol" data-symbol="ðŸ—²">ðŸ—²</div><span>Active</span>
        <div class="text-slate-500 text-[10px] italic">Useable during a rest.</div>
    </div>
    <div class="flex items-center gap-3" onclick="toggleSymbol('â˜€')">
        <div class="legend-symbol" data-symbol="â˜€">â˜€</div><span>Rest</span>
        <div class="text-slate-500 text-[10px] italic">Has limited uses per rest.</div>
    </div>
    <div class="flex items-center gap-3">
        <div class="legend-symbol" data-symbol="â˜…">â˜…</div><span>Unique</span>
        <div class="text-slate-500 text-[10px] italic">Cannot be taken multiple times or with other uniques of the same type.</div>
    </div>
    <div class="flex items-center gap-3">
        <div class="legend-symbol" data-symbol="â«˜">â«˜</div><span>Linked</span>
        <div class="text-slate-500 text-[10px] italic">Prerequisite trait required.</div>
    </div>
    <div class="flex items-center gap-3">
        <div class="legend-symbol" data-symbol="âš¿">âš¿</div><span>Lock</span>
        <div class="text-slate-500 text-[10px] italic">Level or attribute requirement.</div>
    </div>
</div>

<input id="search-input" class="search-input mt-6" placeholder="Search traits..." oninput="renderTraits()">
</aside>

<!-- TABLES -->
<main class="flex-1 space-y-12">

<section>
<h2 onclick="toggleTable('t1')" class="text-2xl font-bold cursor-pointer">Basic Traits</h2><span class="text-xs uppercase bg-indigo-500/20 text-indigo-400 px-3 py-1 rounded-full border border-indigo-500/30">1 Point</span>
<div id="t1">
<table class="w-full mt-4 text-sm">
<tbody id="traits-1"></tbody>
</table>
</div>
</section>

<section>
<h2 onclick="toggleTable('t2')" class="text-2xl font-bold cursor-pointer">Advanced Traits</h2><span class="text-xs uppercase bg-amber-500/20 text-amber-400 px-3 py-1 rounded-full border border-amber-500/30">2 Points</span>
<div id="t2">
<table class="w-full mt-4 text-sm">
<tbody id="traits-2"></tbody>
</table>
</div>
</section>

</main>
</div>

<script>
const FILTERABLE_SYMBOLS = ['â§–','ðŸ—²','â˜€'];
let activeSymbol = null;
let rawTraits = [];

function toggleSymbol(symbol){
    if(!FILTERABLE_SYMBOLS.includes(symbol)) return;
    activeSymbol = activeSymbol === symbol ? null : symbol;
    document.querySelectorAll('.legend-symbol').forEach(el=>{
        el.classList.toggle('active', el.dataset.symbol === activeSymbol);
    });
    renderTraits();
}

function toggleTable(id){
    const el = document.getElementById(id);
    el.style.display = el.style.display === 'none' ? 'block' : 'none';
}

function renderTraits(){
    const search = document.getElementById('search-input').value.toLowerCase();
    const t1 = document.getElementById('traits-1');
    const t2 = document.getElementById('traits-2');
    t1.innerHTML = ''; t2.innerHTML = '';

    rawTraits
        .filter(t =>
            (!activeSymbol || t.Symbols === activeSymbol) &&
            t.Name.toLowerCase().includes(search)
        )
        .forEach(t=>{
            const row = `
            <tr class="trait-row border-b border-slate-700">
                <td class="py-3 font-bold text-white">${t.Name}</td>
                <td class="py-3">${t.Symbols}</td>
                <td class="py-3 text-slate-400">${t.Parameters||'â€”'}</td>
                <td class="py-3 text-slate-400">${t.Description}</td>
            </tr>`;
            (t.Cost === "1" ? t1 : t2).innerHTML += row;
        });
}
window.addEventListener('DOMContentLoaded', async () => {
    try {
        const res = await fetch('./traits.json', { cache: 'no-store' });
        if (!res.ok) throw new Error();
        const data = await res.json();
        rawTraits = Array.isArray(data) ? data : [];
    } catch {
        rawTraits = [];
    }
    renderTraits();
});



renderTraits();
</script>

</body>
</html>


