<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mythlight RPG | Traits</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #cbd5e1; scroll-behavior: smooth; }
        h1, h2, h3, .fantasy-font { font-family: 'Cinzel', serif; }

        .nav-glass {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trait-row {
            transition: background-color 0.2s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .trait-row:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        .legend-card {
            background: linear-gradient(to bottom right, rgba(30, 41, 59, 0.7), rgba(15, 23, 42, 0.9));
            border: 1px solid rgba(99, 102, 241, 0.2);
        }

        .legend-symbol {
            font-size: 1.1rem;
            color: #fff;
            background: rgba(255, 255, 255, 0.05);
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin-right: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            cursor: pointer;
        }

        .legend-symbol.active {
            background: rgba(99, 102, 241, 0.3);
            border-color: rgba(99, 102, 241, 0.6);
        }

        .symbol-tag {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .filter-select, .search-input {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: #cbd5e1;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            outline: none;
            font-size: 0.875rem;
            width: 100%;
        }

        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.3); border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen">

<nav class="fixed w-full z-50 nav-glass">
    <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <img src="Mythlight Logo White.svg" alt="Mythlight" class="h-10 w-auto object-contain" onerror="this.style.display='none'">
            <span class="text-xl font-bold tracking-widest text-white fantasy-font uppercase">Mythlight</span>
        </div>
        <div class="hidden md:flex space-x-8 text-xs font-semibold uppercase tracking-widest">
            <a href="index.html" class="hover:text-white transition-colors text-slate-400">Home</a>
            <a href="rules.html" class="hover:text-white transition-colors text-slate-400">Rules</a>
            <a href="spells.html" class="hover:text-white transition-colors text-slate-400">Spells</a>
            <a href="traits.html" class="text-indigo-400">Traits</a>
        </div>
    </div>
</nav>

<main class="pt-32 pb-20 max-w-7xl mx-auto px-6">

<div class="flex flex-col lg:flex-row gap-12 items-start">

<!-- Sidebar -->
<aside class="w-full lg:w-80 lg:sticky lg:top-28 z-40">
<section class="p-6 rounded-3xl legend-card shadow-2xl">

<h3 class="text-xs font-bold text-indigo-400 uppercase tracking-[0.2em] mb-4">Trait Legend</h3>

<div class="space-y-4">
    <div class="flex items-center" onclick="toggleSymbol('â§–')">
        <div class="legend-symbol" data-symbol="â§–">â§–</div>
        <span class="text-sm text-white">Passive</span>
    </div>
    <div class="flex items-center" onclick="toggleSymbol('â˜€')">
        <div class="legend-symbol" data-symbol="â˜€">â˜€</div>
        <span class="text-sm text-white">Rest-Based</span>
    </div>
    <div class="flex items-center" onclick="toggleSymbol('ðŸ—²')">
        <div class="legend-symbol" data-symbol="ðŸ—²">ðŸ—²</div>
        <span class="text-sm text-white">Active</span>
    </div>
    <div class="flex items-center" onclick="toggleSymbol('â˜…')">
        <div class="legend-symbol" data-symbol="â˜…">â˜…</div>
        <span class="text-sm text-white">Unique</span>
    </div>
    <div class="flex items-center" onclick="toggleSymbol('â«˜')">
        <div class="legend-symbol" data-symbol="â«˜">â«˜</div>
        <span class="text-sm text-white">Linked</span>
    </div>
    <div class="flex items-center" onclick="toggleSymbol('âš¿')">
        <div class="legend-symbol" data-symbol="âš¿">âš¿</div>
        <span class="text-sm text-white">Lock</span>
    </div>
</div>

<input id="search-input" class="search-input mt-6" placeholder="Search traits..." oninput="renderTraits()">

</section>
</aside>

<!-- Tables -->
<div class="flex-1 space-y-16">

<section>
<h2 onclick="toggleTable('table-1')" class="cursor-pointer text-3xl font-bold text-white mb-4">
Basic Traits <span class="text-xs">(1 Point)</span>
</h2>
<div id="table-1">
<table class="w-full">
<tbody id="traits-1-point"></tbody>
</table>
</div>
</section>

<section>
<h2 onclick="toggleTable('table-2')" class="cursor-pointer text-3xl font-bold text-white mb-4">
Advanced Traits <span class="text-xs">(2 Points)</span>
</h2>
<div id="table-2">
<table class="w-full">
<tbody id="traits-2-point"></tbody>
</table>
</div>
</section>

</div>
</div>
</main>

<script>
let activeSymbol = null;
let rawTraits = [
    { "Name": "Toughness", "Cost": "1", "Symbols": "â§–", "Parameters": "HP +5", "Description": "A baseline increase to your physical resilience." },
    { "Name": "Meditative Mind", "Cost": "1", "Symbols": "â˜€", "Parameters": "Rest", "Description": "Recover additional mana when performing a short rest." },
    { "Name": "Adrenaline Rush", "Cost": "2", "Symbols": "ðŸ—²", "Parameters": "1/Encounter", "Description": "Take an additional action during your turn." }
];

function toggleSymbol(symbol) {
    activeSymbol = activeSymbol === symbol ? null : symbol;
    document.querySelectorAll('.legend-symbol').forEach(el => {
        el.classList.toggle('active', el.dataset.symbol === activeSymbol);
    });
    renderTraits();
}

function toggleTable(id) {
    const el = document.getElementById(id);
    el.style.display = el.style.display === 'none' ? 'block' : 'none';
}

function renderTraits() {
    const search = document.getElementById('search-input').value.toLowerCase();
    const t1 = document.getElementById('traits-1-point');
    const t2 = document.getElementById('traits-2-point');
    t1.innerHTML = '';
    t2.innerHTML = '';

    rawTraits
        .filter(t =>
            (!activeSymbol || t.Symbols === activeSymbol) &&
            t.Name.toLowerCase().includes(search)
        )
        .forEach(trait => {
            const row = `
            <tr class="trait-row">
                <td>${trait.Name}</td>
                <td>${trait.Symbols}</td>
                <td>${trait.Parameters}</td>
                <td>${trait.Description}</td>
            </tr>`;
            (trait.Cost === "1" ? t1 : t2).innerHTML += row;
        });
}
window.addEventListener('DOMContentLoaded', async () => {
    try {
        const res = await fetch('./traits.json', { cache: 'no-store' });
        if (!res.ok) throw new Error();
        const data = await res.json();
        rawTraits = Array.isArray(data) ? data : [];
    } catch {
        rawTraits = [];
    }
    renderTraits();
});



renderTraits();
</script>

</body>
</html>

